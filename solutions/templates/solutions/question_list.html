{% extends 'base.html' %}
{% load bootstrap4 %}
{% load i18n %}


{% block body_block %}
<div class="wrapper">
  <div class="dataTables_wrapper dt-bootstrap4">
    <!--
    Available colors for the full background: full-color-blue, full-color-azure, full-color-green, full-color-red, full-color-orange
    Available colors only for the toolbar: toolbar-color-blue, toolbar-color-azure, toolbar-color-green, toolbar-color-red, toolbar-color-orange
  -->
  <table id="fresh-table"  class="table table-striped table-no-bordered table-hover dataTable dtr-inline" style="width: 100%;" role="grid" aria-describedby="datatables_info" width="100%" cellspacing="0">
    <thead>
      <!-- <th data-field="id" >Id</th> -->
      <th data-field="Ref" data-sortable="true">Ref</th>
      <th data-field="title" data-sortable="true">{% trans "Title" %}</th>
      <th data-field="status" data-sortable="true">{% trans "Status" %}</th>
      <th data-field="published" data-sortable="true">{% trans "Published on" %}</th>
      <th data-field="applicant" data-sortable="true">{% trans "Applicant" %}</th>
      <th data-field="applicant" data-sortable="true">{% trans "Consultant" %}</th>
      <th data-field="priority" data-sortable="true">{% trans "priority" %}</th>
      <th data-field="categorie" data-sortable="true">{% trans "Categorie" %}</th>
      <th data-field="resolution" data-sortable="true">{% trans "Resolution time" %}</th>
      <th data-field="actions" >Actions</th>
    </thead>

    <tbody>
      {% for question in question_list %}
      <tr>
        <td><a class="text-dark" href="{% url 'solutions:questiondetail' pk=question.pk %}">{{question.get_ref}}</a></td>
        <td>{{ question.objet  }}</td>
        <td>{{ question.get_status_display}}</td>
        <td>{{ question.created_at|date:"d/M/Y"}}</td>
        <td><a href="{% url 'accounts:profile' username=question.user.username %}">{{ question.user }}</a></td>
        <td>{{ question.charged_by|default_if_none:''}}</td>
        <td>{{ question.get_priorite_display}}</td>
        <td>{{ question.categorie.name}}</td>
        <td>{{ question.get_time_to_resolv}}</td>
        <td>
          <a rel="tooltip" title="Edit" class="table-action edit" href="{% url 'solutions:questiondetail' pk=question.pk %}" title="Edit">
            <i class="fa fa-edit"></i>
          </a>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
</div>


        <script>
          $(document).ready(function() {
            config = {
              "pagingType": "full_numbers",
              "lengthMenu": [
                [10, 25, 50, -1],
                [10, 25, 50, "{% trans "All" %}"]
              ],
              responsive: true,
              language: {
                "search": "_INPUT_",
                "emptyTable":     "{% trans "No data available in table" %}",
                "info":           "{% trans "Showing _START_ to _END_ of _TOTAL_ entries" %}",
                "infoEmpty":      "{% trans "Showing 0 to 0 of 0 entries" %}",
                "infoFiltered":   "{% trans "(filtered from _MAX_ total entries)" %}",
                "infoPostFix":    "",
                "thousands":      ",",
                "lengthMenu":     "{% trans "Show _MENU_ entries" %}",
                "loadingRecords": "{% trans "Loading..." %}",
                "processing":     "{% trans "Processing..." %}",
                "search":         "{% trans "Search:" %}",
                "zeroRecords":    "{% trans "No matching records found" %}",
                "paginate": {
                    "first":      "{% trans "First" %}",
                    "last":       "{% trans "Last" %}",
                    "next":       "{% trans "Next" %}",
                    "previous":   "{% trans "Previous" %}",
                },
              }
            };
            $('#fresh-table').DataTable(config);


            var table = $('.datatable').DataTable();

          });
        </script>
{% endblock %}
